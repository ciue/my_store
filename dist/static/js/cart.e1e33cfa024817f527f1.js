webpackJsonp([5],{"/mlL":function(e,t,s){"use strict";var n=s("//Fk"),i=s.n(n),a=s("mtWM"),r=s.n(a),o=void 0,c={},u=r.a.CancelToken;r.a.interceptors.request.use(function(e){return c[e.url]?(c[e.url]("操作取消"),c[e.url]=o):c[e.url]=o,e},function(e){return i.a.reject(e)}),r.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="连接错误"+e.response.status}else e.message="连接到服务器失败";return i.a.resolve(e.response)}),r.a.defaults.baseURL="",r.a.defaults.headers={"X-Requested-With":"XMLHttpRequest"},r.a.defaults.timeout=1e4,t.a={get:function(e,t){return new i.a(function(s,n){r()({method:"get",url:e,params:t,cancelToken:new u(function(e){o=e})}).then(function(e){s(e)})})},post:function(e,t){return new i.a(function(s,n){r()({method:"post",url:e,data:t,cancelToken:new u(function(e){o=e})}).then(function(e){s(e)})})}}},"0C+S":function(e,t){},NW8W:function(e,t){},TFhR:function(e,t,s){"use strict";var n={hotlist:"/index/hotlist",carousel:"/index/carousel",rootlists:"/category/rootlists",rankData:"/category/rank",sublists:"/category/sublists",searchLists:"/search/lists",gooddetails:"/goods/details",dealLists:"/goods/deal",cartLists:"/cart/lists",addCart:"/cart/add",cartReduce:"/cart/reduce",changeNum:"/cart/changeNum",cartRemove:"/cart/remove",cartMremove:"/cart/mremove",addressLists:"/address/lists",addressAdd:"/address/add",addressRemove:"/address/remove",addressUpdate:"/address/update",addressSetDefault:"/address/setDefault"};for(var i in n)n.hasOwnProperty(i)&&(n[i]="https://www.easy-mock.com/mock/5bcd99ebeed633374f5387f6/store"+n[i]);t.a=n},"U/rD":function(e,t,s){"use strict";t.a={filters:{currency:function(e){var t=""+e;if(t.indexOf(".")>1){var s=t.split(".");return s[0]+"."+(s[1]+"0").substr(0,2)}return t+".00"}}}},eC21:function(e,t){},gWPi:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("d7EF"),i=s.n(n),a=(s("NW8W"),s("0C+S"),s("eC21"),s("h8ED"),s("7+uW")),r=s("mtWM"),o=s.n(r),c=s("U/rD"),u=s("TFhR"),d=s("Zrlr"),h=s.n(d),f=s("wxAW"),l=s.n(f),g=s("/mlL"),m=function(){function e(){h()(this,e)}return l()(e,null,[{key:"changeNum",value:function(e,t,s){return g.a.get(u.a[e],{id:t,number:s})}}]),e}(),v=s("Gu7T"),p=s.n(v),b=s("rxKx"),L=s.n(b);function k(e,t,s,n){var i=s.arg,a=s.value,r=n.context[i];new L.a(e).on(t,function(){return r.apply(void 0,p()(a))})}a.default.directive("swipeleft",{bind:function(e,t,s){k(e,"swipeleft",t,s)}}),a.default.directive("swiperight",{bind:function(e,t,s){k(e,"swiperight",t,s)}}),new a.default({el:"#app",data:{cartLists:null,total:0,isEditing:!1,editingShop:null,removePopup:!1,toRemove:null},created:function(){this.getCartLists()},methods:{getCartLists:function(){var e=this;o.a.post(u.a.cartLists).then(function(t){var s=t.data.cartLists;s.forEach(function(e){e.checked=!1,e.editable=!1,e.editMsg="编辑",e.removeChecked=!1,e.goodList.forEach(function(e){e.checked=!1,e.removeChecked=!1,e.editable=!1})}),e.cartLists=s})},selectGood:function(e,t){var s=this;t[this.editStatus]=!t[this.editStatus],e[this.editStatus]=e.goodList.every(function(e){return e[s.editStatus]})},selectShop:function(e){var t=this;e.goodList.forEach(function(s){return s[t.editStatus]=!e[t.editStatus]}),e[this.editStatus]=!e[this.editStatus]},edit:function(e,t){this.resetEdit(),e.editable=!e.editable,e.editMsg=e.editable?"完成":"编辑",e.goodList.forEach(function(t){return t.editable=e.editable}),this.isEditing=e.editable,this.cartLists.forEach(function(s,n){n!==t&&(s.editable=!1,s.editMsg=e.editable?" ":"编辑")}),this.editingShop=e.editable?e:null},add:function(e){m.changeNum("changeNum",e,e.number).then(function(t){return e.number++})},reduce:function(e){m.changeNum("changeNum",e,e.number).then(function(t){return e.number--})},blur:function(e,t){console.log(!/^[1-9][0-9]*$/.test(e.target.value)),/^[1-9][0-9]*$/.test(e.target.value)?m.changeNum("changeNum",t,t.number).then(function(s){return t.number=+e.target.value}):t.number=1},remove:function(e,t,s,n){this.removePopup=!0,this.toRemove={shop:e,shopIndex:t,good:s,goodIndex:n}},removeConfirm:function(){var e=this,t=this.toRemove,s=t.shop,n=t.shopIndex,i=t.good,a=t.goodIndex;o.a.post(u.a.cartRemove,{id:i.id}).then(function(t){console.log(t),s.goodList.splice(a,1),s.goodList.length||(e.cartLists.splice(n,1),e.removeShop()),e.removePopup=!1})},removeShop:function(){this.cartLists.forEach(function(e){e.editable=!1,e.editMsg="编辑"}),this.isEditing=!1,this.editingShop=null},left:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var n=i()(t,3),a=n[0];n[1],n[2];this.resetEdit(),a.editable=!0},right:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var n=i()(t,3),a=n[0];n[1],n[2];a.editable=!1},resetEdit:function(){this.cartLists.forEach(function(e){e.goodList.forEach(function(e){e.editable=!1})})}},computed:{editStatus:function(){return this.isEditing?"removeChecked":"checked"},allSelected:{get:function(){var e=this;return!(!this.cartLists||!this.cartLists.length)&&this.cartLists.every(function(t){return t[e.editStatus]})},set:function(e){var t=this;this.cartLists.forEach(function(s){s[t.editStatus]=e,s.goodList.forEach(function(s){return s[t.editStatus]=e})})}},selectedLists:function(){if(this.cartLists&&this.cartLists.length){var e=[],t=0;return this.cartLists.forEach(function(s){s.goodList.forEach(function(s){s.checked&&(e.push(s),t+=s.price*s.number,console.log(t))})}),this.total=t,e}return[]},removeLists:function(){var e=[];return this.isEditing?(this.editingShop.goodList.forEach(function(t){t.removeChecked&&e.push(t)}),e):[]}},mixins:[c.a]})},h8ED:function(e,t){}},["gWPi"]);
//# sourceMappingURL=cart.e1e33cfa024817f527f1.js.map