{"version":3,"sources":["webpack:///./src/modules/js/http.js","webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/mixin.js","webpack:///./src/modules/js/cartService.js","webpack:///./src/modules/js/vueTouch.js","webpack:///./src/pages/cart/cart.js"],"names":["cancel","promiseArr","CancelToken","axios","interceptors","request","use","config","url","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","reject","response","status","message","resolve","defaults","baseURL","headers","X-Requested-With","timeout","__webpack_exports__","get","param","method","params","cancelToken","c","then","res","post","data","hotlist","carousel","rootlists","rankData","sublists","searchLists","gooddetails","dealLists","cartLists","addCart","cartReduce","changeNum","cartRemove","cartMremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","mixin","filters","currency","price","priceStr","indexOf","arr","split","substr","cart","apiName","good","number","http","id","vueTouch","el","type","binding","vnode","fnName","arg","args","value","callback","context","Hammer","on","Vue","directive","bind","total","isEditing","editingShop","removePopup","toRemove","created","this","getCartLists","methods","_this","lists","forEach","shop","checked","editable","editMsg","removeChecked","goodList","selectGood","_this2","editStatus","every","selectShop","_this3","edit","index","resetEdit","item","i","add","cartService","reduce","blur","e","console","log","test","target","remove","shopIndex","goodIndex","removeConfirm","_this4","_toRemove","splice","length","removeShop","left","_len","arguments","Array","_key","_args","slicedToArray_default","right","_len2","_key2","_args2","computed","allSelected","_this5","set","newVal","_this6","selectedLists","push","removeLists","mixins"],"mappings":"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","file":"static/js/cart.e1e33cfa024817f527f1.js","sourcesContent":["import axios from 'axios';\r\n\r\nlet cancel, promiseArr = {}\r\nconst CancelToken = axios.CancelToken;\r\n//请求拦截器\r\naxios.interceptors.request.use(config => {\r\n  //发起请求时，取消掉当前正在进行的相同请求\r\n  if (promiseArr[config.url]) {\r\n    promiseArr[config.url]('操作取消')\r\n    promiseArr[config.url] = cancel\r\n  } else {\r\n    promiseArr[config.url] = cancel\r\n  }\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n//响应拦截器（异常处理）\r\naxios.interceptors.response.use(response => {\r\n  return response\r\n}, error => {\r\n  if (error && error.response) {\r\n    switch (error.response.status) {\r\n      case 400:\r\n        error.message = '错误请求'\r\n        break;\r\n      case 401:\r\n        error.message = '未授权，请重新登录'\r\n        break;\r\n      case 403:\r\n        error.message = '拒绝访问'\r\n        break;\r\n      case 404:\r\n        error.message = '请求错误,未找到该资源'\r\n        break;\r\n      case 405:\r\n        error.message = '请求方法未允许'\r\n        break;\r\n      case 408:\r\n        error.message = '请求超时'\r\n        break;\r\n      case 500:\r\n        error.message = '服务器端出错'\r\n        break;\r\n      case 501:\r\n        error.message = '网络未实现'\r\n        break;\r\n      case 502:\r\n        error.message = '网络错误'\r\n        break;\r\n      case 503:\r\n        error.message = '服务不可用'\r\n        break;\r\n      case 504:\r\n        error.message = '网络超时'\r\n        break;\r\n      case 505:\r\n        error.message = 'http版本不支持该请求'\r\n        break;\r\n      default:\r\n        error.message = `连接错误${error.response.status}`\r\n    }\r\n  } else {\r\n    error.message = \"连接到服务器失败\"\r\n  }\r\n  // message.error(error.message)\r\n  return Promise.resolve(error.response)\r\n})\r\n\r\naxios.defaults.baseURL = ''\r\n//设置默认请求头\r\naxios.defaults.headers = {\r\n  'X-Requested-With': 'XMLHttpRequest'\r\n}\r\naxios.defaults.timeout = 10000\r\n\r\nexport default {\r\n  //get请求\r\n  get(url, param) {\r\n    return new Promise((resolve, reject) => {\r\n      axios({\r\n        method: 'get',\r\n        url,\r\n        params: param,\r\n        cancelToken: new CancelToken(c => {\r\n          cancel = c\r\n        })\r\n      }).then(res => {\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  //post请求\r\n  post(url, param) {\r\n    return new Promise((resolve, reject) => {\r\n      axios({\r\n        method: 'post',\r\n        url,\r\n        data: param,\r\n        cancelToken: new CancelToken(c => {\r\n          cancel = c\r\n        })\r\n      }).then(res => {\r\n        resolve(res)\r\n      })\r\n    })\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/http.js","const url = {\r\n    hotlist: '/index/hotlist',\r\n    carousel: '/index/carousel',\r\n    rootlists: '/category/rootlists',\r\n    rankData: '/category/rank',\r\n    sublists: '/category/sublists',\r\n    searchLists: '/search/lists',\r\n    gooddetails: '/goods/details',\r\n    dealLists: '/goods/deal',\r\n    cartLists: '/cart/lists',\r\n    addCart: '/cart/add',\r\n    cartReduce: '/cart/reduce',\r\n    changeNum: '/cart/changeNum',\r\n    cartRemove: '/cart/remove',\r\n    cartMremove: '/cart/mremove',\r\n    addressLists: '/address/lists',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n};\r\n\r\n// const host = 'http://rap2api.taobao.org/app/mock/3756/GET/';\r\nconst host = 'https://www.easy-mock.com/mock/5bcd99ebeed633374f5387f6/store';\r\n\r\nfor (const key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = host + url[key];\r\n    }\r\n}\r\n\r\nexport default url;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","const mixin = {\r\n    filters: {\r\n        currency(price) {\r\n            const priceStr = '' + price;\r\n            if (priceStr.indexOf('.') > 1) {\r\n                const arr = priceStr.split('.');\r\n                return arr[0] + '.' + (arr[1] + '0').substr(0, 2);\r\n            }\r\n            return priceStr + '.00';\r\n\r\n        },\r\n    },\r\n};\r\n\r\nexport default mixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import http from 'js/http.js';\r\nimport url from 'js/api.js';\r\n\r\nclass cart {\r\n    // 修改商品数量\r\n    static changeNum(apiName, good, number) {\r\n        return http.get(url[apiName], {\r\n            id: good,\r\n            number: number,\r\n        })\r\n    }\r\n}\r\n\r\nexport default cart\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","import Vue from 'vue'\r\nimport Hammer from 'hammerjs'\r\n\r\nVue.directive('swipeleft', {\r\n    bind: function (el, binding, vnode) {\r\n        vueTouch(el, 'swipeleft', binding, vnode)\r\n    }\r\n})\r\n\r\nVue.directive('swiperight', {\r\n    bind: function (el, binding, vnode) {\r\n        vueTouch(el, 'swiperight', binding, vnode)\r\n    }\r\n})\r\n\r\nfunction vueTouch(el, type, binding, vnode) {\r\n    let fnName = binding.arg\r\n    let args = binding.value\r\n    const callback = vnode.context[fnName]\r\n    const af = new Hammer(el)\r\n    af.on(type, () => callback(...args))\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/vueTouch.js","import './cart_base.css';\r\nimport './cart_trade.css';\r\nimport './cart.css';\r\nimport './cart_transtion.css'\r\n\r\nimport Vue from 'vue';\r\nimport axios from 'axios';\r\nimport mixin from 'js/mixin.js';\r\nimport url from 'js/api.js';\r\nimport cartService from 'js/cartService.js'\r\nimport vueTouch from 'js/vueTouch.js'\r\n\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        cartLists: null,\r\n        total: 0,\r\n        isEditing: false,\r\n        editingShop: null,\r\n        removePopup: false,\r\n        toRemove: null,\r\n    },\r\n    created() {\r\n        this.getCartLists()\r\n    },\r\n    methods: {\r\n        getCartLists() {\r\n            axios.post(url.cartLists).then(res => {\r\n                let lists = res.data.cartLists;\r\n                lists.forEach(shop => {\r\n                    shop.checked = false;\r\n                    shop.editable = false;\r\n                    shop.editMsg = '编辑';\r\n                    shop.removeChecked = false;\r\n                    shop.goodList.forEach(good => {\r\n                        good.checked = false;\r\n                        good.removeChecked = false;\r\n                        good.editable = false;\r\n                    })\r\n                });\r\n                this.cartLists = lists;\r\n            })\r\n        },\r\n        selectGood(shop, good) {\r\n            good[this.editStatus] = !good[this.editStatus];\r\n            shop[this.editStatus] = shop.goodList.every(good => good[this.editStatus])\r\n        },\r\n        selectShop(shop) {\r\n            shop.goodList.forEach(good => good[this.editStatus] = !shop[this.editStatus])\r\n            shop[this.editStatus] = !shop[this.editStatus];\r\n        },\r\n        // 编辑整个店铺\r\n        edit(shop, index) {\r\n            this.resetEdit()\r\n            shop.editable = !shop.editable;\r\n            shop.editMsg = shop.editable ? '完成' : '编辑';\r\n            shop.goodList.forEach(good => good.editable = shop.editable)\r\n            this.isEditing = shop.editable;\r\n            this.cartLists.forEach((item, i) => {\r\n                if (i === index) return;\r\n                item.editable = false;\r\n                item.editMsg = shop.editable ? ' ' : '编辑'\r\n            })\r\n            this.editingShop = shop.editable ? shop : null\r\n        },\r\n        add(good) {\r\n            // 点击按钮增加一个商品数量\r\n            cartService.changeNum('changeNum', good, good.number)\r\n                .then(res => good.number++)\r\n        },\r\n        reduce(good) {\r\n            // 点击按钮减少一个商品数量\r\n            // if(good.number ===1 ) return;\r\n            cartService.changeNum('changeNum', good, good.number)\r\n                .then(res => good.number--)\r\n        },\r\n        blur(e, good) {\r\n            // 校验是否为合法值\r\n            console.log(!/^[1-9][0-9]*$/.test(e.target.value));\r\n            if (!/^[1-9][0-9]*$/.test(e.target.value)) {\r\n                good.number = 1;\r\n                return\r\n            }\r\n            // 编辑商品数量\r\n            cartService.changeNum('changeNum', good, good.number)\r\n                .then(res => good.number = +e.target.value)\r\n        },\r\n        remove(shop, shopIndex, good, goodIndex) {\r\n            // 删除单个商品\r\n            this.removePopup = true\r\n            this.toRemove = {\r\n                shop,\r\n                shopIndex,\r\n                good,\r\n                goodIndex\r\n            }\r\n        },\r\n        removeConfirm() {\r\n            // 弹出框确认删除\r\n            let {\r\n                shop,\r\n                shopIndex,\r\n                good,\r\n                goodIndex\r\n            } = this.toRemove\r\n            axios.post(url.cartRemove, {\r\n                id: good.id\r\n            }).then(res => {\r\n                console.log(res);\r\n                shop.goodList.splice(goodIndex, 1);\r\n                if (!shop.goodList.length) {\r\n                    this.cartLists.splice(shopIndex, 1);\r\n                    this.removeShop()\r\n                }\r\n                this.removePopup = false;\r\n            })\r\n        },\r\n        removeShop() {\r\n            // 移除店铺\r\n            this.cartLists.forEach(shop => {\r\n                shop.editable = false;\r\n                shop.editMsg = '编辑';\r\n            })\r\n            this.isEditing = false;\r\n            this.editingShop = null;\r\n        },\r\n        left(...args) {\r\n            let [good, goodIndex, shopIndex] = args\r\n            // 重置页面的编辑状态，页面仅能保持单个待删除商品\r\n            this.resetEdit()\r\n            good.editable = true\r\n            // console.log( this.$refs[`good-${shopIndex}-${goodIndex}`])\r\n\r\n        },\r\n        right(...args) {\r\n            let [good, goodIndex, shopIndex] = args\r\n            good.editable = false\r\n        },\r\n        resetEdit() {\r\n            this.cartLists.forEach(shop => {\r\n                shop.goodList.forEach(item => {\r\n                    item.editable = false\r\n                })\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        // 判断页面时候处于编辑状态\r\n        editStatus() {\r\n            return this.isEditing ? 'removeChecked' : 'checked';\r\n        },\r\n        // 全选按钮\r\n        allSelected: {\r\n            get() {\r\n                if (this.cartLists && this.cartLists.length) {\r\n                    return this.cartLists.every(shop => shop[this.editStatus])\r\n                }\r\n                return false;\r\n            },\r\n            set(newVal) {\r\n                this.cartLists.forEach(shop => {\r\n                    shop[this.editStatus] = newVal;\r\n                    shop.goodList.forEach(good => good[this.editStatus] = newVal)\r\n                })\r\n            },\r\n        },\r\n        // 选择的商品\r\n        selectedLists() {\r\n            if (this.cartLists && this.cartLists.length) {\r\n                let arr = []\r\n                let total = 0\r\n                this.cartLists.forEach(shop => {\r\n                    shop.goodList.forEach(good => {\r\n                        if (good.checked) {\r\n                            arr.push(good)\r\n                            total += good.price * good.number\r\n                            console.log(total);\r\n                        }\r\n                    })\r\n                })\r\n                this.total = total;\r\n                return arr\r\n            }\r\n            return []\r\n        },\r\n        // 预计删除的列表\r\n        removeLists() {\r\n            let arr = []\r\n            if (this.isEditing) {\r\n                this.editingShop.goodList.forEach(good => {\r\n                    if (good.removeChecked) arr.push(good);\r\n                })\r\n                return arr\r\n            }\r\n            return []\r\n        },\r\n\r\n    },\r\n\r\n    mixins: [mixin],\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}